services:
  local-pdf-vault:
    build: .
    container_name: local-pdf-vault
    ports:
      - "4337:4337"
    environment:
      - OLLAMA_HOST=host.docker.internal
      - OLLAMA_PORT=11434
      - OLLAMA_MODEL=qwen3-vl:30b-a3b-instruct
      - SCAN_DIRECTORY=/data/pdfs
      - MAX_PAGES_PER_END=3
      - MAX_PARALLEL_HASHING=16
    volumes:
      - ./pdfscanner.db:/app/pdfscanner.db
      - E:\Archief:/data/pdfs:ro
    extra_hosts:
      - "host.docker.internal:host-gateway"
    restart: unless-stopped
